# =============================================================================
# SuperDeploy - FULL AUTOMATION Configuration
# =============================================================================
# üéØ HEDEF: Sadece bu dosyayƒ± doldur, 2 komut √ßalƒ±≈ütƒ±r, sistem hazƒ±r!
#
# KULLANIM:
#   1. cp ENV.example .env
#   2. nano .env  (GCP project ID + ≈üifreleri doldur)
#   3. make deploy  (tek komut!)
#   4. Done! ‚ú®
#
# √ñNEMLƒ∞:
#   ‚úÖ VM restart ‚Üí sadece bu dosyayƒ± g√ºncelle ‚Üí git push
#   ‚úÖ Config deƒüi≈üikliƒüi ‚Üí sadece bu dosyayƒ± d√ºzenle ‚Üí git push
#   ‚ùå Ba≈üka hi√ßbir yerde hardcoded deƒüer yok!

# =============================================================================
# üåç GCP / INFRASTRUCTURE CONFIGURATION
# =============================================================================
# GCP Project (ZORUNLU - gcloud projects list ile listele)
GCP_PROJECT_ID=galvanic-camp-475519-d6
GCP_REGION=us-central1
GCP_ZONE=us-central1-a

# SSH Key Path (ZORUNLU - ssh-keygen -t rsa -b 4096 -f ~/.ssh/cfk_gcp)
SSH_KEY_PATH=~/.ssh/cfk_gcp
SSH_USER=superdeploy

# VM Configuration (Terraform tarafƒ±ndan kullanƒ±lacak)
VM_MACHINE_TYPE=e2-medium
VM_DISK_SIZE=20
VM_IMAGE=ubuntu-2204-lts

# =============================================================================
# üåê VM NETWORK CONFIGURATION (Terraform √ßƒ±ktƒ±larƒ±yla otomatik doldurulacak)
# =============================================================================
# ƒ∞lk kurulumda bo≈ü bƒ±rak, Terraform dolduracak
# VM restart sonrasƒ± manuel g√ºncelle
CORE_EXTERNAL_IP=
CORE_INTERNAL_IP=
SCRAPE_EXTERNAL_IP=
SCRAPE_INTERNAL_IP=
PROXY_EXTERNAL_IP=
PROXY_INTERNAL_IP=

# =============================================================================
# üîê SECURITY & PASSWORDS (ZORUNLU - Random string'ler olu≈ütur)
# =============================================================================
# PostgreSQL Database
POSTGRES_DB=superdeploy
POSTGRES_USER=superdeploy
POSTGRES_PASSWORD=RANDOM_32_CHARS

# RabbitMQ Message Queue
RABBITMQ_DEFAULT_USER=superdeploy
RABBITMQ_DEFAULT_PASS=RANDOM_32_CHARS

# API Service
API_SECRET_KEY=RANDOM_64_CHARS

# Proxy Registry
PROXY_REGISTRY_USER=admin
PROXY_REGISTRY_PASS=RANDOM_32_CHARS
PROXY_REGISTRY_API_KEY=RANDOM_64_CHARS

# Proxy Server
PROXY_USER=proxyuser
PROXY_PASSWORD=RANDOM_32_CHARS

# JWT & App Secrets
SECRET_KEY=RANDOM_64_CHARS
JWT_SECRET=RANDOM_64_CHARS

# Forgejo Admin
FORGEJO_ADMIN_USER=cradexco
FORGEJO_ADMIN_PASSWORD=RANDOM_32_CHARS
FORGEJO_ADMIN_EMAIL=admin@superdeploy.io

# Forgejo Database
FORGEJO_DB_NAME=forgejo
FORGEJO_DB_USER=forgejo
FORGEJO_DB_PASSWORD=RANDOM_32_CHARS

# =============================================================================
# üì¶ SERVICE CONFIGURATION (Otomatik doldurulur, deƒüi≈ütirme!)
# =============================================================================
# Database
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
API_DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
PROXY_REGISTRY_DB_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# RabbitMQ
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_VHOST=/
RABBITMQ_QUEUE_NAME=scraping_jobs
API_RABBITMQ_URL=amqp://${RABBITMQ_DEFAULT_USER}:${RABBITMQ_DEFAULT_PASS}@${RABBITMQ_HOST}:${RABBITMQ_PORT}${RABBITMQ_VHOST}

# API Service
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=2
API_LOG_LEVEL=info

# Proxy Registry Service
PROXY_REGISTRY_HOST=0.0.0.0
PROXY_REGISTRY_PORT=8080

# Proxy Server
SOCKS5_PORT=1080
HTTP_PROXY_PORT=3128
IP_CHECK_INTERVAL=300
IP_CHECK_URL=https://api.ipify.org
IP_UPDATE_ENDPOINT=http://${CORE_INTERNAL_IP}:${PROXY_REGISTRY_PORT}/api/proxies/update
PROXY_ALLOWED_IPS=
PROXY_TIMEOUT=30
PROXY_RETRY_COUNT=3
PROXY_ROTATION_INTERVAL=300

# Worker Configuration
WORKER_CONCURRENCY=2
WORKER_LOG_LEVEL=info
WORKER_NAME=scrape-worker
PLAYWRIGHT_TIMEOUT=30000
PLAYWRIGHT_HEADLESS=true

# Scraping Configuration
USER_AGENT="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
MAX_RETRIES=3
DOWNLOAD_DELAY=1
CONCURRENT_REQUESTS=5

# Monitoring & Logging
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_METRICS=true
SENTRY_DSN=

# Caddy Web Server
DOMAIN=${CORE_EXTERNAL_IP}
ACME_EMAIL=admin@superdeploy.io

# Environment
ENVIRONMENT=production
DEBUG=false

# =============================================================================
# üéØ QUICK PASSWORD GENERATION (Terminal'de √ßalƒ±≈ütƒ±r)
# =============================================================================
# openssl rand -base64 32  # 32 karakterlik random string
# openssl rand -base64 64  # 64 karakterlik random string
