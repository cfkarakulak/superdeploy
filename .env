# =============================================================================
# SuperDeploy - Master Configuration
# =============================================================================
# IMPORTANT: This is the ONLY config file. Everything is controlled from here.
# 
# USAGE:
#   1. cp ENV.example .env
#   2. Fill REQUIRED values (marked with CHANGE_THIS)
#   3. make deploy
#
# NO FALLBACKS - All values are required!

# =============================================================================
# üåê GCP Infrastructure
# =============================================================================
GCP_PROJECT_ID=galvanic-camp-475519-d6                    # Your GCP project ID
SSH_KEY_PATH=~/.ssh/cfk_gcp                   # SSH key for VMs
SSH_USER=superdeploy                          # Linux user on VMs
VM_MACHINE_TYPE=e2-medium                     # VM size for CORE
VM_DISK_SIZE=20                               # Disk size in GB
VM_IMAGE=debian-cloud/debian-11               # OS image

# GCP Network (auto-filled by Terraform after first deploy)
CORE_EXTERNAL_IP=34.56.43.99
CORE_INTERNAL_IP=10.0.0.35
SCRAPE_EXTERNAL_IP=34.67.236.167
SCRAPE_INTERNAL_IP=10.0.0.37
PROXY_EXTERNAL_IP=34.173.11.246
PROXY_INTERNAL_IP=10.0.0.36

# =============================================================================
# üîê Forgejo Git Server
# =============================================================================
FORGEJO_ORG=cradexco                          # Git organization name
FORGEJO_ADMIN_USER=cradexco                   # Admin username
FORGEJO_ADMIN_PASSWORD=SuperSecure123Pass            # Admin password (strong!)
FORGEJO_ADMIN_EMAIL=admin@superdeploy.io      # Admin email

# Repository names (can be changed before first deploy)
REPO_SUPERDEPLOY=superdeploy-app              # Deployment orchestration repo
REPO_API=cheapa-api                           # API service repo
REPO_STOREFRONT=cheapa-storefront             # Frontend repo
REPO_SERVICES=cheapa-services                 # Background services repo

# =============================================================================
# üê≥ Docker Registry
# =============================================================================
DOCKER_REGISTRY=docker.io                     # docker.io, ghcr.io, or custom
DOCKER_ORG=cheapa                             # Docker Hub organization
API_IMAGE_TAG=latest                          # Default image tags
DASHBOARD_IMAGE_TAG=latest
PROXY_REGISTRY_IMAGE_TAG=latest
WORKER_IMAGE_TAG=latest

# =============================================================================
# üóÑÔ∏è PostgreSQL Database
# =============================================================================
POSTGRES_DB=superdeploy
POSTGRES_USER=superdeploy
POSTGRES_PASSWORD=PostgresPass123                 # Strong password!
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# =============================================================================
# üê∞ RabbitMQ Message Queue
# =============================================================================
RABBITMQ_DEFAULT_USER=superdeploy
RABBITMQ_DEFAULT_PASS=RabbitPass123             # Strong password!
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_VHOST=/
RABBITMQ_QUEUE_NAME=scraping_jobs

# =============================================================================
# üöÄ API Service
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=2
API_LOG_LEVEL=info
API_SECRET_KEY=ApiSecret123Key                    # Generate: openssl rand -base64 32
API_DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
API_RABBITMQ_URL=amqp://${RABBITMQ_DEFAULT_USER}:${RABBITMQ_DEFAULT_PASS}@${RABBITMQ_HOST}:${RABBITMQ_PORT}${RABBITMQ_VHOST}

# =============================================================================
# üìä Proxy Registry Service
# =============================================================================
PROXY_REGISTRY_HOST=0.0.0.0
PROXY_REGISTRY_PORT=8080
PROXY_REGISTRY_USER=admin
PROXY_REGISTRY_PASS=RegistryPass123               # Strong password!
PROXY_REGISTRY_API_KEY=RegistryApiKey123            # Generate: openssl rand -base64 32
PROXY_REGISTRY_DB_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# =============================================================================
# üåê Proxy Servers
# =============================================================================
PROXY_USER=proxyuser
PROXY_PASSWORD=ProxyPass123
SOCKS5_PORT=1080
HTTP_PROXY_PORT=3128
IP_CHECK_INTERVAL=300
IP_CHECK_URL=https://api.ipify.org
IP_UPDATE_ENDPOINT=http://${CORE_INTERNAL_IP}:${PROXY_REGISTRY_PORT}/api/proxies/update
PROXY_ALLOWED_IPS=
PROXY_TIMEOUT=30
PROXY_RETRY_COUNT=3
PROXY_ROTATION_INTERVAL=300

# =============================================================================
# üë∑ Worker Configuration
# =============================================================================
WORKER_CONCURRENCY=2
WORKER_LOG_LEVEL=info
WORKER_NAME=scrape-worker
PLAYWRIGHT_TIMEOUT=30000
PLAYWRIGHT_HEADLESS=true

# =============================================================================
# üï∑Ô∏è Scraping Configuration
# =============================================================================
USER_AGENT="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
MAX_RETRIES=3
DOWNLOAD_DELAY=1
CONCURRENT_REQUESTS=5

# =============================================================================
# üìà Monitoring & Logging
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_METRICS=true
SENTRY_DSN=

# =============================================================================
# üåê Web Server (Caddy)
# =============================================================================
DOMAIN=${CORE_EXTERNAL_IP}
ACME_EMAIL=admin@superdeploy.io

# =============================================================================
# üîß Environment
# =============================================================================
ENVIRONMENT=production
DEBUG=false
SECRET_KEY=SecretKey123                        # Generate: openssl rand -base64 32
JWT_SECRET=JwtSecret123                        # Generate: openssl rand -base64 32

# =============================================================================
# üîó Service URLs (Auto-generated)
# =============================================================================
CORE_API_URL=http://${CORE_INTERNAL_IP}:${API_PORT}
CORE_DB_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${CORE_INTERNAL_IP}:${POSTGRES_PORT}/${POSTGRES_DB}
CORE_RABBITMQ_URL=amqp://${RABBITMQ_DEFAULT_USER}:${RABBITMQ_DEFAULT_PASS}@${CORE_INTERNAL_IP}:${RABBITMQ_PORT}${RABBITMQ_VHOST}
PROXY_REGISTRY_URL=http://${CORE_INTERNAL_IP}:${PROXY_REGISTRY_PORT}
