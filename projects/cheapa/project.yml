# =============================================================================
# cheapa - Project Configuration
# =============================================================================
# Auto-generated by: superdeploy init -p cheapa
# Edit this file, then run: superdeploy generate -p cheapa
# =============================================================================

# Project Information
project:
  name: cheapa
  description: cheapa project
  created_at: 2025-11-01T17:08:22.167082
  ssl_email: "admin@cheapa.io"  # For Let's Encrypt certificates

# =============================================================================
# Cloud Provider Configuration
# =============================================================================
cloud:
  # GCP Configuration
  gcp:
    project_id: "galvanic-camp-475519-d6"
    region: "us-central1"
    zone: "us-central1-a"
  
  # SSH Configuration (for VM access)
  ssh:
    key_path: "~/.ssh/superdeploy_deploy"
    public_key_path: "~/.ssh/superdeploy_deploy.pub"
    user: "superdeploy"

# =============================================================================
# VMs (Infrastructure)
# =============================================================================
vms:
  core:
    count: 1
    machine_type: e2-medium
    disk_size: 20
    services:
      - rabbitmq
      - postgres
  app:
    count: 1
    machine_type: e2-medium
    disk_size: 30
    services: []

# =============================================================================
# Addons Configuration
# =============================================================================
addons:
  rabbitmq:
    version: "3.12-management-alpine"
  postgres:
    version: "15-alpine"
  caddy:
    version: "2-alpine"

# =============================================================================
# Application Services
# =============================================================================
# Each app can define env_aliases for abstraction layers
# Syntax:
#   ALIAS_NAME: SOURCE_VAR   # Clone value from SOURCE_VAR
#   ALIAS_NAME: "value"      # Static value (quoted string)
apps:
  api:
    path: /Users/cfkarakulak/Desktop/cheapa.io/code/api
    vm: app
    port: 8000
    domain: ""  # e.g., api.example.com
    env_aliases:
      # Database abstraction (allows switching from PostgreSQL to MySQL easily)
      DB_CONNECTION: "app"
      DB_HOST: POSTGRES_HOST
      DB_PORT: POSTGRES_PORT
      DB_USERNAME: POSTGRES_USER
      DB_PASSWORD: POSTGRES_PASSWORD
      DB_DATABASE: POSTGRES_DB
  
  storefront:
    path: /Users/cfkarakulak/Desktop/cheapa.io/code/storefront
    vm: app
    port: 3000
    domain: ""  # e.g., storefront.example.com
    env_aliases:
      # Next.js uses different env var naming
      NEXT_PUBLIC_API_CLIENT_URL: "http://10.1.0.2:8000/api"
      API_BASE_URL: "http://10.1.0.2:8000"
      NEXT_PUBLIC_API_BASE_URL: "http://10.1.0.2:8000"
      NEXT_PUBLIC_API_URL: "http://10.1.0.2:8000"
      NEXT_PUBLIC_API_SERVER_URL: "http://10.1.0.2:8000"
  
  services:
    path: /Users/cfkarakulak/Desktop/cheapa.io/code/services
    vm: app
    port: 8001
    domain: ""  # e.g., services.example.com
    env_aliases:
      # Database abstraction (same as api)
      DB_CONNECTION: "app"
      DB_HOST: POSTGRES_HOST
      DB_PORT: POSTGRES_PORT
      DB_USERNAME: POSTGRES_USER
      DB_PASSWORD: POSTGRES_PASSWORD
      DB_DATABASE: POSTGRES_DB

# =============================================================================
# GitHub Configuration
# =============================================================================
github:
  organization: "cheapaio"
  # Variables: GITHUB_TOKEN (from .env)

# =============================================================================
# Network Configuration
# =============================================================================
network:
  vpc_subnet: 10.1.0.0/16
  docker_subnet: 172.30.0.0/24
