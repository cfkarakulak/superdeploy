# Monitoring targets for {{ project_name }}
# Generated by project-deployer role

project: {{ project_name }}
environment: {{ project_config.environment | default('production') }}
vm: {{ project_config.vms.core | default('core') }}

# Application service targets
targets:
{% for target in monitoring_targets %}
  - endpoint: {{ target }}
    labels:
      project: {{ project_name }}
      service: {{ target.split(':')[0] }}
      port: {{ target.split(':')[1] }}
{% endfor %}

# System monitoring
system:
  node_exporter: true
  docker_metrics: true

# Scrape configuration
scrape:
  interval: 15s
  timeout: 10s
  path: /metrics

# Health check endpoints
health_checks:
{% for app_name, app_config in apps.items() %}
  - name: {{ app_name }}
    url: http://localhost:{{ app_config.port }}/health
    interval: 30s
{% endfor %}
