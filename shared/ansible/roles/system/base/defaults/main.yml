---
# Default variables for system/base role

# User and group configuration
superdeploy_user: "superdeploy"
superdeploy_group: "superdeploy"

# Base directories to create
base_directories:
  - /opt/superdeploy
  - /opt/superdeploy/compose
  - /opt/superdeploy/logs
  - /opt/superdeploy/data
  - /opt/backups
  - /opt/backups/postgres
  - /opt/backups/forgejo

# Swap configuration
swap_size_mb: 2048
swap_file_path: /swapfile
swap_swappiness: 10
swap_cache_pressure: 50

# Essential packages to install
essential_packages:
  - curl
  - wget
  - git
  - unzip
  - htop
  - vim
  - ufw
  - chrony
  - rsync
  - python3-pip
  - mailutils
  - postfix
  - software-properties-common
  - apt-transport-https
  - ca-certificates
  - gnupg
  - lsb-release

# Chrony NTP servers
chrony_ntp_servers:
  - "pool 0.debian.pool.ntp.org iburst"
  - "pool 1.debian.pool.ntp.org iburst"
  - "pool 2.debian.pool.ntp.org iburst"
  - "pool 3.debian.pool.ntp.org iburst"

# Postfix configuration
postfix_mailname: "superdeploy.local"
postfix_inet_interfaces: "loopback-only"
postfix_mydestination: "$myhostname, localhost.$mydomain, localhost"

# ============================================================================
# Security Configuration (Integrated from security role)
# ============================================================================

# Security packages to install
security_packages:
  - ufw
  - fail2ban
  - unattended-upgrades
  - apt-listchanges

# Firewall configuration
firewall_additional_ports: []
# Example:
# firewall_additional_ports:
#   - 8000  # API
#   - 3001  # Forgejo
#   - 5432  # PostgreSQL

# Fail2Ban configuration
fail2ban_maxretry: 3
fail2ban_bantime: 3600
fail2ban_findtime: 600

# SSH hardening
ssh_hardening_enabled: true

# Sysctl hardening parameters
sysctl_hardening_params:
  - { name: 'vm.max_map_count', value: '262144' }  # For Elasticsearch if needed
  - { name: 'net.ipv4.tcp_syncookies', value: '1' }
  - { name: 'net.ipv4.ip_forward', value: '1' }  # Required for Docker networking
  - { name: 'net.ipv4.conf.all.accept_redirects', value: '0' }
  - { name: 'net.ipv4.conf.all.send_redirects', value: '0' }
  - { name: 'net.ipv4.conf.all.accept_source_route', value: '0' }
  - { name: 'kernel.dmesg_restrict', value: '1' }
