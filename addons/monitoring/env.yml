# Environment variables for shared monitoring addon

variables:
  MONITORING_HOST:
    source: runtime
    from_ansible: "ansible_default_ipv4.address"
    default: "monitoring"
    required: true
    description: "Monitoring server hostname or IP"
    
  GRAFANA_URL:
    source: config
    from_project: "addons.monitoring.grafana_url"
    default: "http://${MONITORING_HOST}:3000"
    required: false
    description: "Grafana dashboard URL"
    
  GRAFANA_ADMIN_USER:
    source: config
    from_project: "addons.monitoring.grafana_admin_user"
    default: "admin"
    required: true
    description: "Grafana admin username"
    
  GRAFANA_ADMIN_PASSWORD:
    source: secret
    from_secrets: "GRAFANA_ADMIN_PASSWORD"
    required: true
    generate: true
    description: "Grafana admin password"
    
  PROMETHEUS_URL:
    source: config
    from_project: "addons.monitoring.prometheus_url"
    default: "http://${MONITORING_HOST}:9090"
    required: false
    description: "Prometheus server URL"
    
  PROMETHEUS_RETENTION:
    source: config
    from_project: "addons.monitoring.prometheus_retention"
    default: "15d"
    required: false
    description: "Prometheus data retention period"

# GitHub Actions secrets mapping
github_secrets:
  - GRAFANA_ADMIN_USER
  - GRAFANA_ADMIN_PASSWORD
  - GRAFANA_URL
  - PROMETHEUS_URL
