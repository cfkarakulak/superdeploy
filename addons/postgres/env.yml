# Environment variables for .env.superdeploy
variables:
  POSTGRES_VERSION:
    source: config
    from_project: "addons.postgres.version"
    env_name: "VERSION"
    default: "15-alpine"
    required: false
    description: "PostgreSQL Docker image version"
    
  POSTGRES_HOST:
    source: secret
    from_secrets: "HOST"
    from_ansible: "ansible_default_ipv4.address"
    env_name: "HOST"
    default: "localhost"
    required: true
    description: "PostgreSQL hostname (auto-filled from deployment)"
    
  POSTGRES_PORT:
    source: secret
    from_secrets: "PORT"
    env_name: "PORT"
    default: "5432"
    required: true
    description: "PostgreSQL port (from secrets.yml)"
    
  POSTGRES_USER:
    source: secret
    from_secrets: "USER"
    env_name: "POSTGRES_USER"
    default: "${PROJECT}_user"
    required: true
    description: "Database username"
    
  POSTGRES_PASSWORD:
    source: secret
    from_secrets: "PASSWORD"
    env_name: "POSTGRES_PASSWORD"
    required: true
    generate: true
    description: "Database password (auto-generated)"
    
  POSTGRES_DB:
    source: secret
    from_secrets: "DATABASE"
    env_name: "POSTGRES_DB"
    default: "${PROJECT}_db"
    required: true
    description: "Database name"

# GitHub Actions secrets mapping
# Only PostgreSQL-specific variables (addon responsibility)
# Generic DB_* aliases come from project config (application responsibility)
github_secrets:
  - POSTGRES_HOST
  - POSTGRES_PORT
  - POSTGRES_USER
  - POSTGRES_PASSWORD
  - POSTGRES_DB

# GitHub Actions secrets mapping
github_secrets:
  - POSTGRES_HOST
  - POSTGRES_PORT
  - POSTGRES_USER
  - POSTGRES_PASSWORD
  - POSTGRES_DB
