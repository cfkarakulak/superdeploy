# Environment variables for .env.superdeploy
variables:
  POSTGRES_VERSION:
    source: config
    from_project: "addons.postgres.version"
    default: "15-alpine"
    required: false
    description: "PostgreSQL Docker image version"
    
  POSTGRES_HOST:
    source: runtime
    from_ansible: "ansible_default_ipv4.address"
    default: "localhost"
    required: true
    description: "PostgreSQL hostname (resolved at runtime)"
    
  POSTGRES_PORT:
    source: config
    from_project: "addons.postgres.port"
    default: "5432"
    required: false
    description: "PostgreSQL port"
    
  POSTGRES_USER:
    source: config
    from_project: "addons.postgres.user"
    default: "${PROJECT}_user"
    required: true
    description: "Database username"
    
  POSTGRES_PASSWORD:
    source: secret
    from_secrets: "POSTGRES_PASSWORD"
    required: true
    generate: true
    description: "Database password (auto-generated)"
    
  POSTGRES_DB:
    source: config
    from_project: "addons.postgres.database"
    default: "${PROJECT}_db"
    required: true
    description: "Database name"

# GitHub Actions secrets mapping
# Only PostgreSQL-specific variables (addon responsibility)
# Generic DB_* aliases come from project config (application responsibility)
github_secrets:
  - POSTGRES_HOST
  - POSTGRES_PORT
  - POSTGRES_USER
  - POSTGRES_PASSWORD
  - POSTGRES_DB

# GitHub Actions secrets mapping
github_secrets:
  - POSTGRES_HOST
  - POSTGRES_PORT
  - POSTGRES_USER
  - POSTGRES_PASSWORD
  - POSTGRES_DB
