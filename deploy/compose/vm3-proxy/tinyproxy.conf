# TinyProxy configuration

User nobody
Group nogroup

Port 3128
Listen 0.0.0.0

Timeout 600
DefaultErrorFile "/usr/share/tinyproxy/default.html"
StatFile "/usr/share/tinyproxy/stats.html"
LogFile "/var/log/tinyproxy/tinyproxy.log"
LogLevel Info
PidFile "/var/run/tinyproxy/tinyproxy.pid"

MaxClients 100
MinSpareServers 5
MaxSpareServers 20
StartServers 10
MaxRequestsPerChild 0

# Allow connections from worker VMs
# Add actual worker VM IPs here
Allow 10.0.0.0/24

# Disable ViaProxyName to hide proxy
DisableViaHeader Yes

# Disable stats for security
# StatHost "tinyproxy.stats"

# Basic authentication (if needed)
# BasicAuth user password

# Filter URLs (optional)
# Filter "/etc/tinyproxy/filter"

# Anonymous headers
FilterURLs Off
FilterExtended Off
FilterDefaultDeny No

# Reverse proxy (if needed)
# ReversePath "/google/" "http://www.google.com/"

ConnectPort 443
ConnectPort 563

