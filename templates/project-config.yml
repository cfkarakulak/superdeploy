# Project Configuration
# Auto-generated by: superdeploy init -p {{PROJECT}}
# Created: {{CREATED_AT}}

project: {{PROJECT}}
description: {{DESCRIPTION}}
created_at: {{CREATED_AT}}
updated_at: {{UPDATED_AT}}

# Network Configuration
network:
  subnet: {{SUBNET}}  # Auto-assigned or custom

# Services to deploy
services:
{% for service in SERVICES_LIST %}
  - {{service}}
{% endfor %}

# Core Services Configuration
core_services:
{% for service in CORE_SERVICES %}
{% if service == 'postgres' %}
  postgres:
    version: "15-alpine"
    user: "{{PROJECT}}_user"
    database: "{{PROJECT}}_db"
{% elif service == 'rabbitmq' %}
  rabbitmq:
    version: "3.12-management-alpine"
    user: "{{PROJECT}}_user"
{% elif service == 'redis' %}
  redis:
    version: "7-alpine"
{% elif service == 'mongodb' %}
  mongodb:
    version: "7-alpine"
    user: "{{PROJECT}}_user"
    database: "{{PROJECT}}_db"
{% elif service == 'elasticsearch' %}
  elasticsearch:
    version: "8.11.0"
{% elif service == 'minio' %}
  minio:
    version: "latest"
    user: "{{PROJECT}}_user"
{% endif %}
{% endfor %}

# Port Assignments (External:Internal)
# External: Port exposed on host (e.g., 8000, 3002, 9000)
# Internal: Port inside container (e.g., 8000, 3000, 8000)
ports:
{% for service, ports in PORTS.items() %}
  {{service}}:
    external: {{ports.external}}
    internal: {{ports.internal}}
{% endfor %}
  
# Monitoring
monitoring:
  enabled: {{MONITORING_ENABLED|default(true)}}
  prometheus_target: {{PROMETHEUS_TARGET|default(true)}}

# Domain Configuration (optional)
domain: {{DOMAIN}}

# GitHub Configuration
github:
  organization: {{GITHUB_ORG}}
  repositories:
{% for service in SERVICES_LIST %}
    {{service}}: {{GITHUB_ORG}}/{{service}}
{% endfor %}

# Deployment Settings
deployment:
  auto_deploy: true
  health_check_timeout: 300
  rollback_on_failure: true
