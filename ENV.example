# =============================================================================
# SuperDeploy - Infrastructure Configuration Template
# =============================================================================
# Copy this file to .env and fill in your values
#
# USAGE:
#   cp ENV.example .env
#   # Edit .env with your values
#   make deploy

# =============================================================================
# üåê GCP Infrastructure
# =============================================================================
GCP_PROJECT_ID=your-gcp-project-id
SSH_KEY_PATH=~/.ssh/your_key
SSH_USER=superdeploy
VM_MACHINE_TYPE=e2-medium
VM_DISK_SIZE=20
VM_IMAGE=debian-cloud/debian-11

# GCP Network (auto-filled by Terraform after first deploy)
CORE_EXTERNAL_IP=
CORE_INTERNAL_IP=
SCRAPE_EXTERNAL_IP=
SCRAPE_INTERNAL_IP=
PROXY_EXTERNAL_IP=
PROXY_INTERNAL_IP=

# =============================================================================
# üîê Forgejo Git Server (Admin Credentials)
# =============================================================================
FORGEJO_ORG=your-org
FORGEJO_ADMIN_USER=admin
FORGEJO_ADMIN_PASSWORD=change-this-password
FORGEJO_ADMIN_EMAIL=admin@example.com

# Repository names
REPO_SUPERDEPLOY=superdeploy-app

# =============================================================================
# üê≥ Docker Registry (for pushing images)
# =============================================================================
DOCKER_REGISTRY=docker.io
DOCKER_ORG=your-dockerhub-username
DOCKER_USERNAME=your-dockerhub-username
DOCKER_TOKEN=your-dockerhub-token

# =============================================================================
# üîë GitHub Token (for GitHub Actions automation)
# =============================================================================
GITHUB_TOKEN=your-github-token

# =============================================================================
# üêò PostgreSQL (Infrastructure Database - for Forgejo only)
# =============================================================================
FORGEJO_DB_USER=superdeploy
FORGEJO_DB_PASSWORD=change-this-password
FORGEJO_DB_NAME=forgejo

# =============================================================================
# üîí TLS/HTTPS Configuration (Production)
# =============================================================================
DOMAIN_API=api.yourdomain.com
DOMAIN_FORGEJO=forgejo.yourdomain.com
DOMAIN_APP=app.yourdomain.com
DOMAIN_GRAFANA=grafana.yourdomain.com
ACME_EMAIL=admin@yourdomain.com

# Forgejo Secret Key (generate with: openssl rand -hex 32)
FORGEJO_SECRET_KEY=generate-your-32-char-hex-secret

# Forgejo Mail
FORGEJO_MAIL_FROM=noreply@yourdomain.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD="your-gmail-app-password"

# =============================================================================
# üîß Feature Toggles (for debugging)
# =============================================================================
USE_REMOTE_STATE=false           # true=GCS backend, false=local
ENABLE_MONITORING=false          # true=Prometheus/Grafana, false=disabled
ENABLE_HARDENING=false           # true=UFW/Fail2Ban, false=skip
EXPOSE_RABBITMQ_MGMT=true        # true=public 15672, false=internal only

# =============================================================================
# üìä Monitoring (Optional)
# =============================================================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change-this-grafana-password
ALERT_EMAIL=your-email@example.com

# =============================================================================
# üöÄ Application Runtime Secrets (for sync command)
# =============================================================================
# These are used by 'superdeploy sync' to auto-configure GitHub repos
# Add strong passwords here, they'll be synced to GitHub Environments

# GitHub Repository URLs (for CI/CD integration)
GITHUB_REPO_API=cheapaio/api
GITHUB_REPO_DASHBOARD=cheapaio/dashboard
GITHUB_REPO_SERVICES=cheapaio/services

POSTGRES_USER=superdeploy
POSTGRES_PASSWORD=                      # ‚úèÔ∏è Generate strong password
POSTGRES_DB=superdeploy_db

RABBITMQ_USER=superdeploy
RABBITMQ_PASSWORD=                      # ‚úèÔ∏è Generate strong password

REDIS_PASSWORD=                         # ‚úèÔ∏è Generate strong password

API_SECRET_KEY=                         # ‚úèÔ∏è Min 32 chars (openssl rand -hex 32)

# =============================================================================
# üìù Important Notes:
# =============================================================================
# ‚úÖ This file is for INFRASTRUCTURE only (VMs, Forgejo, Docker registry)
# ‚úÖ After first deploy, VM IPs will be auto-updated by 'make update-ips'
# ‚úÖ Forgejo will be deployed with NO manual setup wizard
# ‚úÖ Runner will be auto-registered and ready for CI/CD
# ‚úÖ For HTTPS: Point DNS to VM IP, Caddy handles Let's Encrypt automatically
# ‚úÖ Monitoring: Deploy with docker compose -f docker-compose.monitoring.yml up -d
#
# ‚ö†Ô∏è  APPLICATION SECRETS (Manual - One Time Setup):
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# After 'make deploy', add these secrets via Forgejo UI:
# URL: http://CORE_IP:3001/FORGEJO_ORG/REPO_SUPERDEPLOY/settings/actions/secrets
#
# Required Secrets:
#   ALERT_EMAIL            = your-email@example.com
#   FORGEJO_ORG            = your-org-name
#   REPO_SUPERDEPLOY       = superdeploy-app
#   POSTGRES_USER          = superdeploy
#   POSTGRES_PASSWORD      = your-db-password
#   POSTGRES_DB            = superdeploy_db
#   RABBITMQ_USER          = superdeploy
#   RABBITMQ_PASSWORD      = your-queue-password
#   API_SECRET_KEY         = your-32-char-secret-key
#   PUBLIC_URL             = http://CORE_IP
#   API_BASE_URL           = http://CORE_IP:8000
#   PROXY_REGISTRY_API_KEY = your-proxy-key
