# =============================================================================
# SuperDeploy - Infrastructure Configuration Template
# =============================================================================
# Copy this file to .env and fill in your values
#
# USAGE:
#   cp ENV.example .env
#   # Edit .env with your values
#   make deploy

# =============================================================================
# ğŸŒ GCP Infrastructure
# =============================================================================
GCP_PROJECT_ID=your-gcp-project-id
SSH_KEY_PATH=~/.ssh/your_key
SSH_USER=superdeploy
VM_MACHINE_TYPE=e2-medium
VM_DISK_SIZE=20
VM_IMAGE=debian-cloud/debian-11

# GCP Network (auto-filled by Terraform after first deploy)
CORE_EXTERNAL_IP=
CORE_INTERNAL_IP=
SCRAPE_EXTERNAL_IP=
SCRAPE_INTERNAL_IP=
PROXY_EXTERNAL_IP=
PROXY_INTERNAL_IP=

# =============================================================================
# ğŸ” Forgejo Git Server (Admin Credentials)
# =============================================================================
FORGEJO_ORG=your-org
FORGEJO_ADMIN_USER=admin
FORGEJO_ADMIN_PASSWORD=change-this-password
FORGEJO_ADMIN_EMAIL=admin@example.com

# Repository names
REPO_SUPERDEPLOY=superdeploy

# =============================================================================
# ğŸ³ Docker Registry (for pushing images)
# =============================================================================
DOCKER_REGISTRY=docker.io
DOCKER_ORG=your-dockerhub-username
DOCKER_USERNAME=your-dockerhub-username
DOCKER_TOKEN=your-dockerhub-token

# =============================================================================
# ğŸ”‘ GitHub Token (for GitHub Actions automation)
# =============================================================================
GITHUB_TOKEN=your-github-token

# =============================================================================
# ğŸ˜ PostgreSQL (Infrastructure Database - for Forgejo only)
# =============================================================================
FORGEJO_DB_USER=superdeploy
FORGEJO_DB_PASSWORD=change-this-password
FORGEJO_DB_NAME=forgejo

# =============================================================================
# ğŸ”’ TLS/HTTPS Configuration (Production)
# =============================================================================
DOMAIN_API=api.yourdomain.com
DOMAIN_FORGEJO=forgejo.yourdomain.com
DOMAIN_APP=app.yourdomain.com
DOMAIN_GRAFANA=grafana.yourdomain.com
ACME_EMAIL=admin@yourdomain.com

# Forgejo Secret Key (generate with: openssl rand -hex 32)
FORGEJO_SECRET_KEY=generate-your-32-char-hex-secret

# Forgejo Mail
FORGEJO_MAIL_FROM=noreply@yourdomain.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD="your-gmail-app-password"

# =============================================================================
# ğŸ”§ Feature Toggles (for debugging)
# =============================================================================
USE_REMOTE_STATE=false           # true=GCS backend, false=local
ENABLE_MONITORING=false          # true=Prometheus/Grafana, false=disabled
ENABLE_HARDENING=false           # true=UFW/Fail2Ban, false=skip
EXPOSE_RABBITMQ_MGMT=true        # true=public 15672, false=internal only

# =============================================================================
# ğŸ“Š Monitoring (Optional)
# =============================================================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change-this-grafana-password
ALERT_EMAIL=your-email@example.com

# =============================================================================
# ğŸ“ Project Configuration
# =============================================================================
# Project-specific settings are defined in:
#   projects/<project>/config.yml      â†’ Project metadata & GitHub repos
#   projects/<project>/secrets.env     â†’ App runtime secrets (DB, Redis, etc.)
#
# See: projects/cheapa/ for example structure

# =============================================================================
# ğŸ“ Important Notes:
# =============================================================================
# âœ… This file is for INFRASTRUCTURE only (VMs, Forgejo, Docker registry)
# âœ… After first deploy, VM IPs will be auto-updated by 'make update-ips'
# âœ… Forgejo will be deployed with NO manual setup wizard
# âœ… Runner will be auto-registered and ready for CI/CD
# âœ… For HTTPS: Point DNS to VM IP, Caddy handles Let's Encrypt automatically
# âœ… Monitoring: Deploy with docker compose -f docker-compose.monitoring.yml up -d
#
# âš ï¸  NEXT STEPS (Automated):
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 1. Create project:
#    superdeploy init -p myproject
#
# 2. Sync infrastructure secrets to GitHub:
#    superdeploy sync:infra
#
# 3. Sync app secrets to GitHub repos:
#    superdeploy sync:repos -p myproject \
#      -e app-repos/api/.env:owner/api \
#      -e app-repos/dashboard/.env:owner/dashboard \
#      -c projects/myproject/.passwords.yml
#
# 4. Deploy:
#    superdeploy up -p myproject
#
# 5. Push to GitHub â†’ Auto-deploy via Forgejo!
